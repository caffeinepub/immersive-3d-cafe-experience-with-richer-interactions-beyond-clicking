{
  "kind": "build_request",
  "title": "Reduce 3D cafe scene heaviness to improve load reliability",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-42",
      "text": "Reduce the size of the contour floor/furniture texture used by the 3D scene by switching the app from `/assets/generated/contour-texture-warm.dim_2048x2048.png` to a smaller generated texture, and update all references in the 3D scene to use the new filename.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Make this less heavy maybe that will fix the issue"
        ]
      },
      "acceptanceCriteria": [
        "The project includes a smaller contour texture file in `frontend/public/assets/generated/` and the 3D scene loads it instead of the 2048x2048 version.",
        "No runtime errors occur due to missing texture assets; if the texture fails to load, the scene still renders with the existing safe material fallback behavior (texture undefined).",
        "The frontend build completes successfully with the updated asset path(s)."
      ]
    },
    {
      "id": "REQ-43",
      "text": "Reduce geometric complexity in the 3D cafe environment by lowering segment counts for high-segment primitives (e.g., `cylinderGeometry`, `torusGeometry`, `sphereGeometry`, `coneGeometry`) within `frontend/src/scene/environment/CafeEnvironment.tsx`, `frontend/src/scene/environment/CafeSceneDressing.tsx`, and `frontend/src/scene/environment/CafeFurniture.tsx`, while preserving overall shapes and layout.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Make this less heavy maybe that will fix the issue"
        ]
      },
      "acceptanceCriteria": [
        "Segment counts are reduced across the environment/furniture/dressing components (visible in code changes) without breaking the scene layout or interactivity.",
        "The scene renders successfully and the environment still looks like a café (no missing meshes, no obviously broken geometry).",
        "The scene reaches the “full-environment-mount” success path under normal conditions (i.e., does not consistently fall into degraded mode due to timeouts)."
      ]
    },
    {
      "id": "REQ-44",
      "text": "Reduce GPU/rendering workload for the 3D canvas by adjusting the React Three Fiber `Canvas` configuration in `frontend/src/App.tsx` to use a more conservative device pixel ratio (DPR) and to avoid expensive rendering features when not required for functionality.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Make this less heavy maybe that will fix the issue"
        ]
      },
      "acceptanceCriteria": [
        "The `Canvas` in `frontend/src/App.tsx` is configured with a capped DPR (e.g., a lower max DPR than the browser default).",
        "The 3D scene remains functional (navigation, panel props, interactions still work), and user-facing overlays continue to display English text as they do now.",
        "On typical modern browsers, the scene is less likely to hit the startup watchdog timeout compared to before these changes."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`, or anything in `frontend/src/components/ui` (compose instead).",
    "Backend must remain a single Motoko actor; no new backend services or external databases.",
    "Use English for any user-facing text."
  ],
  "nonGoals": [
    "Do not add new UI panels or new navigation concepts.",
    "Do not change the backend contact message API or storage as part of this optimization-only request.",
    "Do not introduce external performance/analytics services."
  ],
  "imageRequirements": {
    "required": [],
    "edits": [
      "Downscale the contour texture to a smaller size (contour-texture-warm.dim_2048x2048.png > contour-texture-warm.dim_1024x1024.png)"
    ]
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}